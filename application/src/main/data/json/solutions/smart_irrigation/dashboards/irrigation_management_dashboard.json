{
  "title": "Irrigation Management",
  "image": null,
  "mobileHide": false,
  "mobileOrder": null,
  "configuration": {
    "description": "",
    "widgets": {
      "9096bb98-7d8a-5888-e77b-7f02c846c922": {
        "isSystemType": true,
        "bundleAlias": "charts",
        "typeAlias": "basic_timeseries",
        "type": "timeseries",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 8,
        "sizeY": 5,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "cd737d26-3068-aae0-d370-c93f8e7e1a00",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "avgMoisture",
                  "type": "timeseries",
                  "label": "avgMoisture",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.8744305724481565
                }
              ],
              "latestDataKeys": []
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": true,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "shadowSize": 4,
            "fontColor": "#545454",
            "fontSize": 10,
            "xaxis": {
              "showLabels": true,
              "color": "#545454"
            },
            "yaxis": {
              "showLabels": true,
              "color": "#545454"
            },
            "grid": {
              "color": "#545454",
              "tickColor": "#DDDDDD",
              "verticalLines": true,
              "horizontalLines": true,
              "outlineWidth": 1
            },
            "legend": {
              "show": true,
              "position": "nw",
              "backgroundColor": "#f0f0f0",
              "backgroundOpacity": 0.85,
              "labelBoxBorderColor": "rgba(1, 1, 1, 0.45)"
            },
            "decimals": 1,
            "stack": false,
            "tooltipIndividual": false
          },
          "title": "New Timeseries Line Chart",
          "dropShadow": true,
          "enableFullscreen": true,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true
        },
        "row": 0,
        "col": 0,
        "id": "9096bb98-7d8a-5888-e77b-7f02c846c922"
      },
      "c5f8412d-2ffb-4c44-7a7f-223ceea08d84": {
        "isSystemType": true,
        "bundleAlias": "maps_v2",
        "typeAlias": "openstreetmap",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 8.5,
        "sizeY": 6,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "cd737d26-3068-aae0-d370-c93f8e7e1a00",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "latitude",
                  "type": "attribute",
                  "label": "latitude",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.6768443441868226
                },
                {
                  "name": "longitude",
                  "type": "attribute",
                  "label": "longitude",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.06338673390703287
                },
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#f44336",
                  "settings": {},
                  "_hash": 0.848379539472371
                }
              ]
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1664866728397,
                "endTimeMs": 1664953128397
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": true,
          "backgroundColor": "#fff",
          "color": "rgba(0,0,0,0.87)",
          "padding": "8px",
          "settings": {
            "provider": "openstreet-map",
            "mapProvider": "CartoDB.Positron",
            "useCustomProvider": false,
            "latKeyName": "latitude",
            "lngKeyName": "longitude",
            "xPosKeyName": "xPos",
            "yPosKeyName": "yPos",
            "defaultCenterPosition": "0,0",
            "disableScrollZooming": false,
            "disableDoubleClickZooming": false,
            "disableZoomControl": false,
            "fitMapBounds": true,
            "useDefaultCenterPosition": false,
            "mapPageSize": 16384,
            "markerOffsetX": 0.5,
            "markerOffsetY": 1,
            "posFunction": "return {x: origXPos, y: origYPos};",
            "draggableMarker": false,
            "showLabel": true,
            "useLabelFunction": false,
            "label": "${entityName}",
            "showTooltip": true,
            "showTooltipAction": "click",
            "autocloseTooltip": true,
            "useTooltipFunction": false,
            "tooltipPattern": "<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}<br/><b>Temperature:</b> ${temperature} Â°C<br/><small>See advanced settings for details</small>",
            "tooltipOffsetX": 0,
            "tooltipOffsetY": -1,
            "color": "#fe7569",
            "useColorFunction": true,
            "colorFunction": "var type = dsData[dsIndex]['Type'];\nif (type == 'colorpin') {\n\tvar temperature = dsData[dsIndex]['temperature'];\n\tif (typeof temperature !== undefined) {\n\t    var percent = (temperature + 60)/120 * 100;\n\t    return tinycolor.mix('blue', 'red', percent).toHexString();\n\t}\n\treturn 'blue';\n}\n",
            "useMarkerImageFunction": true,
            "markerImageSize": 34,
            "markerImageFunction": "var type = dsData[dsIndex]['Type'];\nif (type == 'thermometer') {\n\tvar res = {\n\t    url: images[0],\n\t    size: 40\n\t}\n\tvar temperature = dsData[dsIndex]['temperature'];\n\tif (typeof temperature !== undefined) {\n\t    var percent = (temperature + 60)/120;\n\t    var index = Math.min(3, Math.floor(4 * percent));\n\t    res.url = images[index];\n\t}\n\treturn res;\n}",
            "markerImages": [
              "data:image/png;base64,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",
              "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAB/CAYAAAD4mHJdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACWAAAAlgB7MGOJQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA3vSURBVGiB7Vt7cFzVef+dc+/d90OrJyO/JSO/4ncxxfULMCYIAyEW08amJJgmM4GmnZjJdNq4gcSGzLQxk3bsaWcaaIHyR8CJrWAbpjgG/AhINsbYxkaSDY6xJFvSrrS7Wu3uvfecr3+cu1pbXhkJs/4nujNndufec77f+d7fd+4uw8gvIxwOfocBaz0e91yXyx0BgKyZiWUz5kcEvBKPJ18EYI+C5rWvkpKSyZGS8LGHGtbQR8ePUUdnB50/f57OfnqWWlpbaN++39O99fdQpCR0NBKJTBwJTfZFE4LBYLmh8+YXXvifKctWrEBPTze9+cbu8/3JVMoWNjwer3/ZsuUTvV4P239gP36yceNZW9CtyWQyei262hcB+7zurU/99Ge3r1nTgJdfevFsqr8/Wlc3rWbGzFkV8+fPr1iwYEEJgLadO3cmbr/jjohh6KXHPjxamsmar39pjoPBYHl5aUnnqZY2/b1Dh9LdPd39kUgk6PP5PD6fH36/Dz6fDx6PF+fOfdZ9+pPTgbq6Ou+aBx+0k/0DVYlEIjYcbX4tYM5pxeK/WKIDwM7Gxt0TJox/dtLESXC53JuHzvV4PBVHDjfvAYDZs+fonMsV16R9rYeM8XG1tbUAgMrKsrDP659DRJ5gMNhbaH5NTU0IAMaPHw9IPv5LAxORy+31AgBcLsO41lwAcLu9BgAYLheIkftLAxfzGgMeAx4DHgMeAx4DHgMeAx4DHgMeAx4DHgMeAx4D/lME1ke7gDF8ltbOHe3W923oEwYi1jxftWfZWgAziwacZkd2pfyN96XN5IIu7dMtIKA9/TI+zqCnFps2Alg5UlojFnVqIHZUlO2sl4RyC4CU+SEEylux8Z/iyc7mrxw4U7UnYwvGpXMYKIgNGdwXC/76C48oRw3sDWfnCgIkARJXcpwbvpA1e6T0Rq5jDr8EAHKA6OpjUOJwfeXAJAEhAXAGgEPKq+dIMVJqowDO4RAAC0rHV21u5LijAJaABAOIAY5Oh15iFMgj1zEpcUuuXjpIWeCouxjAtnIZcGKA5AVFbRfazPUC50QrKe8+Qy8qiqjBYIODA5DgBd1pBO9WRg9sy7yOhXBca+icYrgTOUGOiKnIVdCdisAxJGBTPsYW0nHRrJqgfNmGVtiqaeR1xchF7Vgz40q/BUNmISlcL7CUgJAMnOUiVwEdF0PURIAAVHaC8ucbAiwcQAb1KQpwXMjFrhtYMcOVO8lhOB457ujcKZd9hBguSYwcelTupKyaQWKYJFEU4xJw/Dhfcw29ilSBcNjEoTucFnSnkeOOvvTJpcVC1cYoGB5NAGEQTukjMAzHoghJghyWCRjenYoTuZjKx8xJiwU4LrSZ6waWpIoBjTuRqxDHRUkSUMWAJAZp6QU5FqOw65HHapG3bGVcBTZXDI5VnFaFgBL1yC34uoBJqEJeIwD2MMY1ilZidAFEMlDOqm9UdpJ0ZawumI+LU9ArwhyqWxyNz14XsBAMUnLVH0ttGB0XococdCGWE3XhOV85MF1WV2OY3omK0S2SkxgYAZYYJoAUpcqEEjG/Ru80isA1ysMXYNCnCum4aKUPgTu90w3sFinXL6nO/MadCAhiKloxBjFMeSuK0S1Kylv1cE1bUVoYyHwhoI6bCswpjjuxK5u2G2lcti2jzNCRTluioHEVw52EBA5/2LKsLBL+h2gs/o+Fjpa+MqtmjCbkqQJSYFF3T3zRsPMvA75i7UiBA4FApa6z5+fNnbd6/frHADghk7QdlhAHdMY0KXkZAHAuozaRMDRtKYMdAYDVq1fjcHPTD860nZlsS3qsv7+/+6pNDr0RDAanGTrf85Onnq75/uNPIJ1O4+dbnj34Ot6B4eFLqksqUeEvgcflAREhZabR09+Li/EorLQ4eFv317D2oW8t0XUdu3a9jud/9auztqD6ZDLZOixwOByeouv8D1u3brtpxYrb0XS4Kfbj3//8VHC8d0nDLXfj67OWIeQJgDGADfoOAxHQl05i14l92PHBXiTPp/c/OrFh9vwF8yMnjp/A5s2bOqXEbX19fX+8CriqqspvmunDTz/10xkr71qFnY07Tr1i7aqsLg2Vb6h/GOPCpdAYgTPlNLmF5AzpvBRp74viX3a/hO6+ge47+hZG61fVTz9y+DCee27Lx15fYFFHR8cAcNkPuw2DPXfP1+vvvf+BB7Br967WX9Mbk70eCn33zlWoCrsgKAFBCdgy/2nLBCyZgCUSMGUSpkzC0G1MrKzE0XMt/la9I0QnM+cWL15cmkwmK1tOnwpksuabg8YVifjnhEOlj69dtw6nT51Kv2q96fYG4fG7gbJwFhn7cxicIJgEZwAfEiokGASpWG1KhvIwg1/91ti1N9DEJ7ZOzKxdt87T1Nz8A67jv2Kx/o85AJDk//zXjzzCAeA/D7zU6PZjkkuXcBuEjN2OrGiHabfDFB2w7HZYoh3mVaMDWWdu1m6Hy5Bw6RIuP6b87+HXdgDAww8/zIXgGwFADwQCFYFA4BuLFi3CoUN/6LRmyL/y6gSXTtC4QDTVgQo/B5iEJFJ6Rt64lI6Vfi3JYBFHd1JA5wIunUNIQvpr/C+bm5u65s9fWBnwe9dISWVc0/DNhQsX6gDwTuuhd3WNYOSGTjjSehGp7EVYsguWuJQfssu51wVTXIIpLsGWlzBgXsSRM5dg6Hk6uk787Zb39gHA7NlzDM7xoM4Yli5fvgJSSiRmmbP9HNA0Qm4D6axEc6uJ6eOzuCloQuOOjlneqiUx2BK4lDBwut2DTFaHoXFYGilaHEjMMOdKKXHb4tvw/nvvL9UZ+Lyb6+pw/PjxpOZhsziX0DigcYLG1QaEBD69ZKA7wRHx2/C7BDSNwEi9AEmZGmJJA/1Z9SJM12hwvcYBzgmaj89obW3pr62dGmCcz+cuQ68GgEtdl7oYU40CZwSeW+As1rmy5KzNkbY1WILDlOp71ubgnKA7czVO4NyhwQhcFS7o6urq5pzDMLRqnXEtCACpdCrFHOHlAsTgYEq0nCnj0jnBY6i8KCTLBxbmzB2yPkczmU4lAYAxHtKFECYAPeDzBQZD4GU+motMueXklECWc7QkSaVDGoTAVetz8AGfLwQAQoisbtt2N4BJZaVlpZQjkntdS8w5UFOFni0YLMGhWfny1rbVPVuoOVKyK9ZeTrMsUl7qAHdzkPyktzeG2tqbw8KihCQlPjVUl2hLBkswmDZD1mJIWxwDWTXSFkfWUs8sZ64QzlqHjiRA2tQ7ZcqUYCwWgyT6hBNjb+3ZvQehUIi52tje3M6FyHHIYNkOqM2RsTjS2cuAs+pe1uYKPLcBkduA+m60sH1+v5/t3fsWGGP/x6VkjR98cAQAMNc7bXJepAyWzWHaimjW4siYDGmTY8DkGMhqapgcaVM9yw5ugMOyeX4DkmGub1otABz/6DiI2O94IpE4E+3p+aCzsxP333PfAvOi2G8JBtMRbU68GZMj44Ao0BzXmgOsRk7spq1oWILB6rQP3nt3/byLnZ2IxWKH4/H4pxoAeFzuC21tretW3rUKnk5mtWiflzAGxhgDQ66IYyrnOnqzBFfDZjAdLk1HMnkpMWRNLldmFomamtrIL/71F+iPJ/8mnc2e4QDQm0jsOXfu3L6TJ0/ivtX3T607M26P6SzMWI5eB7ktPHLPc/MV5xwTjpe9sfLOu2pOHD+JCxc+fyeWSLyZdzCoWsvjNpqef/6F8KTJU/DDLT/a3jM90eDWCS5dqmDvxF7NCRSAOikQhCuMUXHMEDjm3v7jb/+oIRrtxpMbnuzNmvatiUSi7QpgAAiFQneXlZbs3rGjUauorMSmLc+8dShy7HbDELqeA3bC4GCScHxWSMDOgVuaPb2t+t3vPfK9O1P9A/j7v3vC7ov318fj8bdyWFf8YCSbzZ7VNHb+tVdfrV911ypt/bcfq52J2uTBg+//LhWwZ0nJYTtWf6WrcccDGFgLdn5nwkPVD9Q/MLOzsxNPbvhhNpUc+G5vPL7jcqxBjonozwEsBzD5lVde9jy5YcPqTZufKX90/WOwbRv7330nsffDt08dSB41EkZyHPfwmwBAZuTFsBm48GeuWfai2oUzp02fFjKzJhp3NuLFF/+765e//Pfd31q71gLwGYC3GWNNAMCIaBKAJwBUO3uQnZ2d/MyZNv1vn/j+LUuXLq/Z/MyzCIfDTmxW8Y+IVFyWqjKRQkDYNqKxGDb97GkcOXLk7LZt/9F8c12dqKqqYM4LYALQCWAbI6J/A1AGgKK9vSBhoa8vEe+N9TwejcZYU1MTfrN9O6puqkJDw0NYtnwFpk6dCsZUMrFtG22trTiw/11s3/4aotEo1jQ04NZFt6KsrJTCoZKtJaWRiGG4KBKJ5BJWnw4gDedAx+0yMJCywLnQGWOSMabV1NbikUfX40J7B367sxFbt25DMhGHZZkgAC7DhWAojOpx4zF3wS0YP64aVZUVYCoQSN2la4bhIsNlcOS73H5GRBUAHgcwBYABAD09PZROp1gq2V8WTybq4vH4xEQ8oSWSSfSnUkinM7As9RdUw9Dh9XoR8PsQCgYRCodESTj0x1Aw2OrxBXsDgYBdXl6eM2IB4CyAbZcb12wASwBMB1Dq7C4ACJZIJHstM5PWdC2TTmcom80wEtySAFwupum6wbxeDxeCuT0et8/v94UBTTrSJABRAKcAHGCMnbrKjy/bRBjAHAATAFQ5NuAF4IFqAtyOKzKo83MLgAkgA2AAQB+ADgCfAzjBGIsPxfh/6wbDK7xbMFYAAAAASUVORK5CYII=",
              "data:image/png;base64,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",
              "data:image/png;base64,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"
            ],
            "showPolygon": false,
            "polygonKeyName": "perimeter",
            "editablePolygon": false,
            "showPolygonLabel": false,
            "usePolygonLabelFunction": false,
            "polygonLabel": "${entityName}",
            "showPolygonTooltip": false,
            "showPolygonTooltipAction": "click",
            "autoClosePolygonTooltip": true,
            "usePolygonTooltipFunction": false,
            "polygonTooltipPattern": "<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",
            "polygonColor": "#3388ff",
            "polygonOpacity": 0.2,
            "usePolygonColorFunction": false,
            "polygonStrokeColor": "#3388ff",
            "polygonStrokeOpacity": 1,
            "polygonStrokeWeight": 3,
            "usePolygonStrokeColorFunction": false,
            "showCircle": false,
            "circleKeyName": "perimeter",
            "editableCircle": false,
            "showCircleLabel": false,
            "useCircleLabelFunction": false,
            "circleLabel": "${entityName}",
            "showCircleTooltip": false,
            "showCircleTooltipAction": "click",
            "autoCloseCircleTooltip": true,
            "useCircleTooltipFunction": false,
            "circleTooltipPattern": "<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",
            "circleFillColor": "#3388ff",
            "circleFillColorOpacity": 0.2,
            "useCircleFillColorFunction": false,
            "circleStrokeColor": "#3388ff",
            "circleStrokeOpacity": 1,
            "circleStrokeWeight": 3,
            "useCircleStrokeColorFunction": false,
            "useClusterMarkers": false,
            "zoomOnClick": true,
            "maxClusterRadius": 80,
            "animate": true,
            "spiderfyOnMaxZoom": false,
            "showCoverageOnHover": true,
            "chunkedLoading": false,
            "removeOutsideVisibleBounds": true
          },
          "title": "Fields",
          "dropShadow": true,
          "enableFullscreen": true,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "widgetStyle": {},
          "actions": {
            "markerClick": [
              {
                "name": "Field details",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "field",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "6feadbe9-7088-fccc-2cbc-dcde695df002"
              }
            ]
          },
          "showTitleIcon": false,
          "titleTooltip": "",
          "enableDataExport": true,
          "widgetCss": "",
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "row": 0,
        "col": 0,
        "id": "c5f8412d-2ffb-4c44-7a7f-223ceea08d84"
      },
      "a6b597ee-cb21-ee9f-dc98-8673f1d976f1": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 6.5,
        "config": {
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1664866728397,
                "endTimeMs": 1664953128397
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0,0,0,0.87)",
          "padding": "4px",
          "settings": {
            "entitiesTitle": "Irrigation Schedule",
            "enableSearch": true,
            "enableSelectColumnDisplay": true,
            "enableStickyHeader": true,
            "enableStickyAction": true,
            "reserveSpaceForHiddenAction": "true",
            "displayEntityName": false,
            "displayEntityLabel": false,
            "displayEntityType": false,
            "displayPagination": true,
            "defaultPageSize": 10,
            "defaultSortOrder": "name",
            "useRowStyleFunction": false
          },
          "title": "New Entities table",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400,
            "padding": "5px 10px 5px 10px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "4ed5e77d-3c18-a442-e616-14f73013a686",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#8bc34a",
                  "settings": {
                    "columnWidth": "120px",
                    "useCellStyleFunction": true,
                    "cellStyleFunction": "return {\n  fontWeight: 600\n}\n",
                    "useCellContentFunction": true,
                    "cellContentFunction": "return '<span style=\"background: rgba(111, 116, 242, 0.08); border-radius: 16px; padding: 4px 8px; color: #5553AF;\">'+value+'</span>';",
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "columnExportOption": "onlyVisible"
                  },
                  "_hash": 0.6933423282312259,
                  "aggregationType": null,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "schedule",
                  "type": "entityField",
                  "label": "Start day",
                  "color": "#4caf50",
                  "settings": {
                    "columnWidth": "60px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": true,
                    "cellContentFunction": "var schedule = JSON.parse(value);\nvar dateFormat;\nif (new Date().getYear() === new Date(schedule.startTime).getYear()) {\n    dateFormat = 'd MMM';\n} else {\n    dateFormat = 'd MMM yyyy';\n}\nreturn ctx.date.transform(schedule.startTime, dateFormat);",
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "columnExportOption": "onlyVisible"
                  },
                  "_hash": 0.04733952880745074,
                  "aggregationType": null,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "schedule",
                  "type": "entityField",
                  "label": "Start time",
                  "color": "#f44336",
                  "settings": {
                    "columnWidth": "60px",
                    "useCellStyleFunction": true,
                    "cellStyleFunction": "return {\n  fontWeight: 600\n}\n",
                    "useCellContentFunction": true,
                    "cellContentFunction": "var schedule = JSON.parse(value);\nvar time = ctx.date.transform(schedule.startTime, 'HH:mm');\nreturn '<span style=\"background: rgba(111, 116, 242, 0.08); border-radius: 16px; padding: 4px 8px; color: #5553AF;\">'+time+'</span>';\n",
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "columnExportOption": "onlyVisible"
                  },
                  "_hash": 0.1466902034288322,
                  "aggregationType": null,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "schedule",
                  "type": "entityField",
                  "label": "Repeat",
                  "color": "#9c27b0",
                  "settings": {
                    "columnWidth": "120px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": true,
                    "cellContentFunction": "var schedulerWeekday =\n  [\n    'scheduler.sunday',\n    'scheduler.monday',\n    'scheduler.tuesday',\n    'scheduler.wednesday',\n    'scheduler.thursday',\n    'scheduler.friday',\n    'scheduler.saturday'\n  ];\nvar schedule = JSON.parse(value);\nif (schedule.repeat) {\n    var type = schedule.repeat.type;\n    if (type === 'DAILY') {\n        return ctx.translate.instant('scheduler.daily');\n    } else if (type === 'EVERY_N_DAYS') {\n        return ctx.translate.instant('scheduler.every-n-days-text', {days: schedule.repeat.days});\n    } else if (type === 'MONTHLY') {\n        return ctx.translate.instant('scheduler.monthly');\n    } else if (type === 'EVERY_N_WEEKS') {\n        return ctx.translate.instant('scheduler.every-n-weeks-text', {weeks: schedule.repeat.weeks});\n    } else if (type === 'YEARLY') {\n        return ctx.translate.instant('scheduler.scheduler.yearly');\n    } else if (type === 'TIMER') {\n        var timeUnit = schedule.repeat.timeUnit;\n        var timeUnitRepeatText;\n        if (timeUnit === 'HOURS') {\n            timeUnitRepeatText = 'scheduler.every-hour';\n        } else if (timeUnit === 'MINUTES') {\n            timeUnitRepeatText = 'scheduler.every-minute';\n        } else {\n            timeUnitRepeatText = 'scheduler.every-second';\n        }\n        return ctx.translate.instant(timeUnitRepeatText, {count: schedule.repeat.repeatInterval});\n    } else {\n        var text = ctx.translate.instant('scheduler.weekly') + ' ' + ctx.translate.instant('scheduler.on') + ' ';\n        text += schedule.repeat.repeatOn.map((day) => ctx.translate.instant(schedulerWeekday[day])).join(', ');\n        return text;\n    }\n} else {\n    return '&#8212;';\n}\n",
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "columnExportOption": "onlyVisible"
                  },
                  "_hash": 0.8312570330048112,
                  "aggregationType": null,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "schedule",
                  "type": "entityField",
                  "label": "End day",
                  "color": "#ffc107",
                  "settings": {
                    "columnWidth": "60px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": true,
                    "cellContentFunction": "var schedule = JSON.parse(value);\nif (schedule.repeat && schedule.repeat.endsOn) {\n    var dateFormat;\n    if (new Date().getYear() === new Date(schedule.repeat.endsOn).getYear()) {\n        dateFormat = 'd MMM';\n    } else {\n        dateFormat = 'd MMM yyyy';\n    }\n    return ctx.date.transform(schedule.repeat.endsOn, dateFormat);\n} else {\n    return '&#8212;';\n}\n",
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "columnExportOption": "onlyVisible"
                  },
                  "_hash": 0.17195353755002496,
                  "aggregationType": null,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "configuration",
                  "type": "entityField",
                  "label": "Duration",
                  "color": "#2196f3",
                  "settings": {
                    "columnWidth": "80px",
                    "useCellStyleFunction": true,
                    "cellStyleFunction": "return {\n  fontWeight: 600\n}",
                    "useCellContentFunction": true,
                    "cellContentFunction": "var configuration = JSON.parse(value);\nvar duration;\nif (configuration.msgBody && configuration.msgBody.durationInMinutes) {\n    duration = configuration.msgBody.durationInMinutes + ' min';\n} else {\n    duration = '&#8212;';\n}\n\nreturn '<span style=\"background: rgba(111, 116, 242, 0.08); border-radius: 16px; padding: 4px 8px;  color: #5553AF;\">'+duration+'</span>';\n",
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "columnExportOption": "onlyVisible"
                  },
                  "_hash": 0.6115695527306177,
                  "aggregationType": null,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "configuration",
                  "type": "entityField",
                  "label": "Volume",
                  "color": "#607d8b",
                  "settings": {
                    "columnWidth": "80px",
                    "useCellStyleFunction": true,
                    "cellStyleFunction": "return {\n  fontWeight: 600\n}",
                    "useCellContentFunction": true,
                    "cellContentFunction": "var configuration = JSON.parse(value);\nvar volume;\nif (configuration.msgBody && configuration.msgBody.volumeInLitters) {\n    volume = configuration.msgBody.volumeInLitters + ' l';\n} else {\n    volume = '&#8212;';\n}\n\nreturn '<span style=\"background: rgba(111, 116, 242, 0.08); border-radius: 16px; padding: 4px 8px; color: #5553AF;\">'+volume+'</span>';\n",
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "columnExportOption": "onlyVisible"
                  },
                  "_hash": 0.17406314101781595,
                  "aggregationType": null,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "displayTimewindow": true,
          "showTitleIcon": false,
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {},
          "widgetCss": "",
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "actions": {
            "headerButton": [
              {
                "name": "Create irrigation schedule",
                "icon": "add",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "<form #addSchedulerEventForm=\"ngForm\" [formGroup]=\"addSchedulerEventFormGroup\"\n      (ngSubmit)=\"save()\" class=\"sf-scheduler-event-form\">\n    <mat-toolbar fxLayout=\"row\" color=\"primary\">\n        <h2>Create irrigation schedule</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\n    </mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Name</mat-label>\n                <input matInput formControlName=\"name\" required>\n                <mat-error *ngIf=\"addSchedulerEventFormGroup.get('name').hasError('required')\">\n                    Name is required.\n                </mat-error>\n            </mat-form-field>\n        </div>\n        <span class=\"title-modal\">Start</span>\n        <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\n            <mat-form-field appearance=\"fill\">\n                <mat-label>Date</mat-label>\n                <mat-datetimepicker-toggle [for]=\"startDatePicker\" matSuffix></mat-datetimepicker-toggle>\n                <mat-datetimepicker (opened)=\"datePickerOpened()\" #startDatePicker type=\"date\" openOnFocus=\"true\"></mat-datetimepicker>\n                <input required matInput formControlName=\"startDate\" [matDatetimepicker]=\"startDatePicker\">\n            </mat-form-field>\n            <mat-form-field appearance=\"fill\">\n                <mat-label>Time</mat-label>\n                <mat-datetimepicker-toggle [for]=\"startTimePicker\" matSuffix></mat-datetimepicker-toggle>\n                <mat-datetimepicker (opened)=\"datePickerOpened()\" #startTimePicker type=\"time\" openOnFocus=\"true\"></mat-datetimepicker>\n                <input required matInput formControlName=\"startTime\" [matDatetimepicker]=\"startTimePicker\">\n            </mat-form-field>\n        </div>\n        <span class=\"title-modal\">Stop irrigation condition</span>\n        <mat-button-toggle-group formControlName=\"condition\" aria-label=\"Condition\">\n            <mat-button-toggle fxFlex value=\"consumption\">Consumption</mat-button-toggle>\n            <mat-button-toggle fxFlex value=\"duration\">Duration</mat-button-toggle>\n        </mat-button-toggle-group>\n        <section *ngIf=\"addSchedulerEventFormGroup.get('condition').value === 'consumption'\" fxLayout=\"column\">\n            <label class=\"tb-small\" style=\"padding-top: 12px; padding-bottom: 12px;\">Stop irrigation when the amount of water used reaches specified value</label>\n            <mat-form-field appearance=\"fill\">\n                <mat-label>Liters</mat-label>\n                <input required matInput formControlName=\"volumeInLitters\" type=\"number\" min=\"1\" step=\"1\">\n                <mat-error *ngIf=\"addSchedulerEventFormGroup.get('volumeInLitters').hasError('required')\">\n                      Volume in litters is required.\n                </mat-error>\n                <mat-error *ngIf=\"addSchedulerEventFormGroup.get('volumeInLitters').hasError('min')\">\n                      Volume in litters must be greater than 0.\n                </mat-error>\n            </mat-form-field>\n        </section>\n        <section *ngIf=\"addSchedulerEventFormGroup.get('condition').value === 'duration'\" fxLayout=\"column\">\n            <label class=\"tb-small\" style=\"padding-top: 12px; padding-bottom: 12px;\">Stop irrigation after the specified time</label>\n            <mat-form-field appearance=\"fill\">\n                <mat-label>Duration, min</mat-label>\n                <input required matInput formControlName=\"durationInMinutes\" type=\"number\" min=\"1\" step=\"1\">\n                <mat-error *ngIf=\"addSchedulerEventFormGroup.get('durationInMinutes').hasError('required')\">\n                      Duration is required.\n                </mat-error>\n                <mat-error *ngIf=\"addSchedulerEventFormGroup.get('durationInMinutes').hasError('min')\">\n                      Duration must be greater than 0.\n                </mat-error>\n            </mat-form-field>\n        </section>\n        <mat-slide-toggle formControlName=\"repeat\" style=\"padding-bottom: 48px;\">\n            Repeat\n        </mat-slide-toggle>\n        <section *ngIf=\"addSchedulerEventFormGroup.get('repeat').value\" fxLayout=\"column\">\n            <mat-form-field appearance=\"fill\">\n              <mat-label translate>scheduler.repeats</mat-label>\n              <mat-select matInput formControlName=\"repeatType\" required>\n                <mat-option *ngFor=\"let repeatType of schedulerRepeatTypeValues\" [value]=\"repeatType\">\n                  {{ schedulerRepeatTypes[repeatType] | translate }}\n                </mat-option>\n              </mat-select>\n            </mat-form-field>\n            <mat-form-field appearance=\"fill\" *ngIf=\"addSchedulerEventFormGroup.get('repeatType').value === 'EVERY_N_DAYS'\" style=\"padding-bottom: 16px;\">\n              <mat-label translate>scheduler.repeat-every-n-days</mat-label>\n              <input type=\"number\" min=\"1\" step=\"1\" matInput formControlName=\"days\" required>\n              <mat-error *ngIf=\"addSchedulerEventFormGroup.get('days').hasError('required')\">\n                {{ 'scheduler.repeat-days-required' | translate }}\n              </mat-error>\n              <mat-error *ngIf=\"addSchedulerEventFormGroup.get('days').hasError('min')\">\n                {{ 'scheduler.invalid-repeat-days-value' | translate }}\n              </mat-error>\n            </mat-form-field>\n            <mat-form-field appearance=\"fill\" *ngIf=\"addSchedulerEventFormGroup.get('repeatType').value === 'EVERY_N_WEEKS'\" style=\"padding-bottom: 16px;\">\n              <mat-label translate>scheduler.repeat-every-n-weeks</mat-label>\n              <input type=\"number\" min=\"1\" step=\"1\" matInput formControlName=\"weeks\" required>\n              <mat-error *ngIf=\"addSchedulerEventFormGroup.get('weeks').hasError('required')\">\n                {{ 'scheduler.repeat-weeks-required' | translate }}\n              </mat-error>\n              <mat-error *ngIf=\"addSchedulerEventFormGroup.get('days').hasError('min')\">\n                {{ 'scheduler.invalid-repeat-weeks-value' | translate }}\n              </mat-error>\n            </mat-form-field>\n            <section *ngIf=\"addSchedulerEventFormGroup.get('repeatType').value === 'TIMER'\"\n                 formGroupName=\"timerRepeat\"\n                 fxLayout=\"column\">\n              <label translate class=\"tb-small\" style=\"padding-bottom: 8px;\">scheduler.repeat-every</label>\n              <div fxLayout=\"column\" fxLayout.gt-sm=\"row\" fxLayoutGap=\"8px\">\n                <mat-form-field appearance=\"fill\" fxFlex=\"50\">\n                  <mat-label>Interval</mat-label>\n                  <input type=\"number\" min=\"0\" stype=\"any\" matInput formControlName=\"repeatInterval\" required>\n                  <mat-error *ngIf=\"addSchedulerEventFormGroup.get('timerRepeat.repeatInterval').hasError('required')\">\n                    {{ 'scheduler.time-interval-required' | translate }}\n                  </mat-error>\n                </mat-form-field>\n                <mat-form-field appearance=\"fill\" fxFlex=\"50\">\n                  <mat-label>Time unit</mat-label>\n                  <mat-select matInput formControlName=\"timeUnit\" required>\n                    <mat-option *ngFor=\"let timeUnit of schedulerTimeUnitValues\" [value]=\"timeUnit\">\n                      {{ schedulerTimeUnits[timeUnit] | translate }}\n                    </mat-option>\n                  </mat-select>\n                  <mat-error *ngIf=\"addSchedulerEventFormGroup.get('timerRepeat.timeUnit').hasError('required')\">\n                    {{ 'scheduler.time-unit-required' | translate }}\n                  </mat-error>\n                </mat-form-field>\n              </div>\n            </section>\n            <section *ngIf=\"addSchedulerEventFormGroup.get('repeatType').value === 'WEEKLY'\"\n                            formArrayName=\"weeklyRepeat\"\n                            fxLayout=\"column\" style=\"padding-bottom: 16px;\">\n                <label translate class=\"tb-small\">scheduler.repeat-on</label>\n                <span style=\"height: 16px;\"></span>\n                <div fxLayout=\"row\" fxLayoutGap=\"16px\">\n                    <ng-container *ngFor=\"let key of weeklyRepeatsKeys\">\n                        <button type=\"button\"\n                                mat-button\n                                class=\"weekly-repeat\"\n                                [color]=\"weeklyRepeatControl(key).value ? 'primary' : ''\"\n                                [ngClass]=\"{ 'mat-stroked-button': !weeklyRepeatControl(key).value, 'mat-raised-button': weeklyRepeatControl(key).value, 'no-border': weeklyRepeatControl(key).value }\"\n                                (click)=\"toggleWeeklyRepeat(key)\"\n                                matTooltip=\"{{ weeklyRepeats[key].tooltip | translate }}\"\n                                matTooltipPosition=\"above\">\n                            {{ weeklyRepeats[key].label | translate }}\n                        </button>\n                    </ng-container>\n                </div>    \n            </section>    \n            <section fxLayout=\"row\" fxLayoutAlign=\"start start\">\n              <mat-form-field appearance=\"fill\">\n                <mat-label>End date</mat-label>\n                <mat-datetimepicker-toggle [for]=\"endDatePicker\" matSuffix></mat-datetimepicker-toggle>\n                <mat-datetimepicker (opened)=\"datePickerOpened()\" #endDatePicker type=\"date\" openOnFocus=\"true\"></mat-datetimepicker>\n                <input required matInput formControlName=\"endsOnDate\" [matDatetimepicker]=\"endDatePicker\" [errorStateMatcher]=\"endsOnDateMatcher\">\n                <mat-error *ngIf=\"addSchedulerEventFormGroup.hasError('endsOnDateValidator')\">\n                  Invalid date.\n                </mat-error>\n              </mat-form-field>\n            </section>\n        </section>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                [disabled]=\"(isLoading$ | async)\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button mat-raised-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || addSchedulerEventForm.invalid || !addSchedulerEventForm.dirty\">\n            Create\n        </button>\n    </div>\n</form>\n",
                "customCss": ".sf-scheduler-event-form .mat-toolbar.mat-primary {\n    background: #fff;\n    color: rgba(0, 0, 0, 0.87);\n}\n\n.sf-scheduler-event-form .mat-button.mat-primary, .sf-scheduler-event-form .mat-icon-button.mat-primary, .sf-scheduler-event-form .mat-stroked-button.mat-primary {\n    color: #5553AF;\n}\n\n.sf-scheduler-event-form .mat-fab.mat-primary, .sf-scheduler-event-form .mat-flat-button.mat-primary, .sf-scheduler-event-form .mat-mini-fab.mat-primary, .sf-scheduler-event-form .mat-raised-button.mat-primary {\n    color: #fff;\n}\n\n.sf-scheduler-event-form .mat-fab.mat-primary, .sf-scheduler-event-form .mat-flat-button.mat-primary, .sf-scheduler-event-form .mat-mini-fab.mat-primary, .sf-scheduler-event-form .mat-raised-button.mat-primary {\n    background-color: #6F74F2;\n}\n\n.sf-scheduler-event-form .mat-button.mat-primary .mat-button-focus-overlay, .sf-scheduler-event-form .mat-icon-button.mat-primary .mat-button-focus-overlay, .sf-scheduler-event-form .mat-stroked-button.mat-primary .mat-button-focus-overlay {\n    background-color: #6F74F2;\n}\n\n.sf-scheduler-event-form .mat-form-field.mat-focused .mat-form-field-label {\n    color: #5553AF;\n}\n\n.sf-scheduler-event-form .mat-form-field.mat-focused .mat-form-field-ripple {\n    background-color: #6F74F2;\n}\n\n.sf-scheduler-event-form .mat-slide-toggle.mat-checked .mat-ripple-element, .sf-scheduler-event-form .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb {\n    background-color: #6F74F2;\n}\n\n.sf-scheduler-event-form .mat-slide-toggle.mat-checked .mat-slide-toggle-bar {\n    background-color: rgba(111, 116, 242, 0.54);\n}\n\n.sf-scheduler-event-form .mat-datetimepicker-calendar-header {\n    background-color: #6F74F2;\n}\n\n.sf-scheduler-event-form .mat-datetimepicker-calendar-body-cell-content.mat-datetimepicker-calendar-body-selected {\n    background-color: #6F74F2;\n}\n\n.sf-scheduler-event-form .mat-datetimepicker-clock-cell.mat-datetimepicker-clock-cell-selected {\n    background-color: #8689f4;\n}\n\n.sf-scheduler-event-form .mat-datetimepicker-clock-center, .sf-scheduler-event-form .mat-datetimepicker-clock-hand, .sf-scheduler-event-form .mat-datetimepicker-clock-hand:before {\n    background-color: #6F74F2;\n}\n\n.sf-scheduler-event-form .mat-datetimepicker-calendar-body-cell-content.mat-datetimepicker-calendar-body-today:not(.mat-datetimepicker-calendar-body-selected) {\n    border-color: #6F74F2;\n}\n\n.sf-scheduler-event-form .mat-icon {\n    color: #868D9C;\n}\n\n.sf-scheduler-event-form .title-modal {\n    font-weight: 500;\n    font-size: 16px;\n    line-height: 130%;\n    color: #868D9C;\n    padding-bottom: 8px;\n}\n\n.sf-scheduler-event-form .mat-button-toggle-group-appearance-standard, .sf-scheduler-event-form .mat-button-toggle-standalone.mat-button-toggle-appearance-standard {\n    border: none;\n}\n\n.sf-scheduler-event-form .mat-button-toggle {\n    background: rgba(0, 0, 0, 0.06);\n    height: 32px;\n    align-items: center;\n    display: flex;\n}\n\n.sf-scheduler-event-form .mat-button-toggle-checked .mat-button-toggle-button {\n    background-color: #fff;\n    border-radius: 4px;\n    margin-left: 2px;\n    margin-right: 2px;\n}\n\n.sf-scheduler-event-form .mat-button-toggle-appearance-standard .mat-button-toggle-label-content {\n    line-height: 28px;\n    font-size: 14px;\n}\n\n.sf-scheduler-event-form .mat-button-toggle-group-appearance-standard .mat-button-toggle+.mat-button-toggle {\n    border-left: none;\n}\n\n.sf-scheduler-event-form .mat-button-toggle-checked.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay {\n    opacity: .01;\n}\n\n.sf-scheduler-event-form .mat-button.weekly-repeat {\n    padding: 0 15px;\n    min-width: 0;\n}\n\n.sf-scheduler-event-form .mat-button.weekly-repeat.no-border {\n    padding: 0 16px;\n}\n",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\nlet schedulerEventService = $injector.get(widgetContext.servicesMap.get('schedulerEventService'));\n\nopenAddSchedulerEventDialog();\n\nfunction openAddSchedulerEventDialog() {\n    customDialog.customDialog(htmlTemplate, AddSchedulerEventDialogController).subscribe();\n}\n\n\nfunction AddSchedulerEventDialogController(instance) {\n    let vm = instance;\n\n    var currentDate = new Date();\n    var startDate = new Date(\n      currentDate.getFullYear(),\n      currentDate.getMonth(),\n      currentDate.getDate());\n    var startTime = new Date(\n      currentDate.getFullYear(),\n      currentDate.getMonth(),\n      currentDate.getDate(),\n      0,0,0,0);\n\n    vm.schedulerRepeatTypes = {\n        'DAILY': 'scheduler.daily',\n        'EVERY_N_DAYS': 'scheduler.every-n-days',\n        'WEEKLY': 'scheduler.weekly',\n        'EVERY_N_WEEKS': 'scheduler.every-n-weeks',\n        'MONTHLY': 'scheduler.monthly',\n        'YEARLY': 'scheduler.yearly',\n        'TIMER': 'scheduler.timer'\n    };\n\n      \n    vm.schedulerRepeatTypeValues = Object.keys(vm.schedulerRepeatTypes);\n    \n    vm.schedulerTimeUnits = {\n        'HOURS': 'scheduler.hours',\n        'MINUTES': 'scheduler.minutes',\n        'SECONDS': 'scheduler.seconds'\n    };\n\n      \n    vm.schedulerTimeUnitValues = Object.keys(vm.schedulerTimeUnits);\n    \n    vm.weeklyRepeats = {\n      0: { label: 'scheduler.sunday-label', tooltip: 'scheduler.repeat-on-sunday' },  \n      1: { label: 'scheduler.monday-label', tooltip: 'scheduler.repeat-on-monday' },\n      2: { label: 'scheduler.tuesday-label', tooltip: 'scheduler.repeat-on-tuesday' },\n      3: { label: 'scheduler.wednesday-label', tooltip: 'scheduler.repeat-on-wednesday' },\n      4: { label: 'scheduler.thursday-label', tooltip: 'scheduler.repeat-on-thursday' },\n      5: { label: 'scheduler.friday-label', tooltip: 'scheduler.repeat-on-friday' },\n      6: { label: 'scheduler.saturday-label', tooltip: 'scheduler.repeat-on-saturday' },\n    };\n    \n    vm.weeklyRepeatsKeys = Object.keys(vm.weeklyRepeats);\n    \n    vm.weeklyRepeatControl  = function(index) {\n        return vm.addSchedulerEventFormGroup.get('weeklyRepeat').at(index);\n    }\n    \n    vm.toggleWeeklyRepeat = function(key) {\n        const control = vm.weeklyRepeatControl(key);\n        control.setValue(!control.value);\n        vm.addSchedulerEventFormGroup.get('weeklyRepeat').markAsDirty();\n    }\n    \n    vm.createDefaultWeeklyRepeat = function(startDate, weeklyRepeat) {\n        if (!weeklyRepeat) {\n          weeklyRepeat = [];\n          for (let i = 0; i < 7; i++) {\n            weeklyRepeat[i] = false;\n          }\n        }\n        if (typeof startDate !== 'undefined' && startDate !== null) {\n          const setCurrentDate = weeklyRepeat.filter(repeat => repeat).length === 0;\n          if (setCurrentDate) {\n            const day = moment(startDate).day();\n            weeklyRepeat[day] = true;\n          }\n        }\n        return weeklyRepeat;\n    }\n    \n    vm.endsOnDateValidator = function(startDate, endsOnDate) {\n        return (group) => {\n          if (group.controls[endsOnDate].status === 'VALID') {\n            if (group.controls[startDate].value.getTime() > group.controls[endsOnDate].value.getTime()) {\n              return { endsOnDateValidator: true };\n            }\n          }\n          return null;\n        };\n    };\n    \n    vm.endsOnDateMatcher = {\n        isErrorState: function(control) {\n            const invalidCtrl = control && !!(control.invalid);\n            const invalidParent = control && !!(control.parent &&\n            control.parent.invalid && control.parent.hasError('endsOnDateValidator'));\n            return (invalidCtrl || invalidParent);\n        }\n    };\n    \n    vm.datePickerOpened = function() {\n      $('.mat-datetimepicker-popup').addClass('sf-scheduler-event-form');\n    };\n\n\n    vm.addSchedulerEventFormGroup = vm.fb.group({\n      name: ['', [vm.validators.required]],\n      startDate: [startDate, [vm.validators.required]],\n      startTime: [startTime, [vm.validators.required]],\n      condition: ['consumption', []],\n      volumeInLitters: [1000, [vm.validators.required, vm.validators.min(1)]],\n      durationInMinutes: [30, [vm.validators.required, vm.validators.min(1)]],\n      repeat: [null, []],\n      repeatType: [null, [vm.validators.required]],\n      weeklyRepeat: vm.fb.array(vm.createDefaultWeeklyRepeat()),\n      endsOnDate: [null, [vm.validators.required]],\n      days: [null, [vm.validators.min(1), vm.validators.required]],\n      weeks: [null, [vm.validators.min(1), vm.validators.required]],\n      timerRepeat: vm.fb.group(\n        {\n          repeatInterval: [null, [vm.validators.required, vm.validators.min(0)]],\n          timeUnit: [null, [vm.validators.required]]\n        }\n      )\n    },\n    {\n        validator: vm.endsOnDateValidator('startDate', 'endsOnDate')\n    });\n    \n    vm.addSchedulerEventFormGroup.get('repeat').valueChanges.subscribe((repeat) => {\n      if (repeat) {\n        vm.addSchedulerEventFormGroup.get('repeatType').patchValue('DAILY', {emitEvent: false});\n        const startDate = vm.addSchedulerEventFormGroup.get('startDate').value;\n        const endsOnDate = new Date(\n          startDate.getFullYear(),\n          startDate.getMonth(),\n          startDate.getDate() + 5);\n        vm.addSchedulerEventFormGroup.get('endsOnDate').patchValue(endsOnDate, {emitEvent: false});\n      }\n      vm.updateEnabledState();\n    });\n    \n    vm.addSchedulerEventFormGroup.get('repeatType').valueChanges.subscribe((repeatType) => {\n      if (repeatType === 'WEEKLY') {\n          const startDate = vm.addSchedulerEventFormGroup.get('startDate').value;\n          vm.addSchedulerEventFormGroup.get('weeklyRepeat').patchValue(vm.createDefaultWeeklyRepeat(startDate), {emitEvent: false});\n      }\n      vm.updateEnabledState();\n    });\n    \n    vm.addSchedulerEventFormGroup.get('weeklyRepeat').valueChanges.subscribe((weeklyRepeat) => {\n      const startDate = vm.addSchedulerEventFormGroup.get('startDate').value;\n      vm.addSchedulerEventFormGroup.get('weeklyRepeat').patchValue(vm.createDefaultWeeklyRepeat(startDate, weeklyRepeat),\n        {emitEvent: false});\n    });\n    \n    vm.addSchedulerEventFormGroup.get('condition').valueChanges.subscribe(() => {\n      vm.updateEnabledState();\n    });\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n    \n    vm.updateEnabledState = function() {\n        vm.addSchedulerEventFormGroup.enable({emitEvent: false});\n        const repeat = vm.addSchedulerEventFormGroup.get('repeat').value;\n        const condition = vm.addSchedulerEventFormGroup.get('condition').value;\n        if (!repeat) {\n            vm.addSchedulerEventFormGroup.get('repeatType').disable({emitEvent: false});\n            vm.addSchedulerEventFormGroup.get('weeklyRepeat').disable({emitEvent: false});\n            vm.addSchedulerEventFormGroup.get('endsOnDate').disable({emitEvent: false});\n            vm.addSchedulerEventFormGroup.get('timerRepeat').disable({emitEvent: false});\n            vm.addSchedulerEventFormGroup.get('days').disable({emitEvent: false});\n            vm.addSchedulerEventFormGroup.get('weeks').disable({emitEvent: false});\n        } else {\n            const repeatType = vm.addSchedulerEventFormGroup.get('repeatType').value;\n            if (repeatType !== 'WEEKLY') {\n                vm.addSchedulerEventFormGroup.get('weeklyRepeat').disable({emitEvent: false});\n            }\n            if (repeatType !== 'TIMER') {\n                vm.addSchedulerEventFormGroup.get('timerRepeat').disable({emitEvent: false});\n            }\n            if (repeatType !== 'EVERY_N_DAYS') {\n                vm.addSchedulerEventFormGroup.get('days').disable({emitEvent: false});\n            }\n            if (repeatType !== 'EVERY_N_WEEKS') {\n                vm.addSchedulerEventFormGroup.get('weeks').disable({emitEvent: false});\n            }\n        }\n        if (condition === 'consumption') {\n            vm.addSchedulerEventFormGroup.get('durationInMinutes').disable({emitEvent: false});\n        } else {\n            vm.addSchedulerEventFormGroup.get('volumeInLitters').disable({emitEvent: false});\n        }\n        \n        vm.addSchedulerEventFormGroup.get('repeatType').updateValueAndValidity({emitEvent: false});\n        vm.addSchedulerEventFormGroup.get('weeklyRepeat').updateValueAndValidity({emitEvent: false});\n        vm.addSchedulerEventFormGroup.get('endsOnDate').updateValueAndValidity({emitEvent: false});\n        vm.addSchedulerEventFormGroup.get('timerRepeat').updateValueAndValidity({emitEvent: false});\n        vm.addSchedulerEventFormGroup.get('days').updateValueAndValidity({emitEvent: false});\n        vm.addSchedulerEventFormGroup.get('weeks').updateValueAndValidity({emitEvent: false});\n        vm.addSchedulerEventFormGroup.get('durationInMinutes').updateValueAndValidity({emitEvent: false});\n        vm.addSchedulerEventFormGroup.get('volumeInLitters').updateValueAndValidity({emitEvent: false});\n    };\n    \n    vm.save = function() {\n        vm.addSchedulerEventFormGroup.markAsPristine();\n        saveSchedulerEventObservable().subscribe(\n            function () {\n                widgetContext.updateAliases();\n                vm.dialogRef.close(null);\n            }\n        );\n    };\n    \n    vm.updateEnabledState();\n\n    function saveSchedulerEventObservable() {\n        const formValues = vm.addSchedulerEventFormGroup.value;\n        let schedulerEvent = {\n            name: formValues.name,\n            type: 'Irrigation',\n            originatorId: widgetContext.stateController.getStateParams().entityId,\n            schedule: {\n                timezone: moment.tz.guess()\n            },\n            configuration: {\n                msgType: 'SF_START_IRRIGATION',\n                msgBody: {}\n            }\n        };\n        const startDateValue = formValues.startDate;\n        const startTimeValue = formValues.startTime;\n        const startTime = new Date(\n            startDateValue.getFullYear(),\n            startDateValue.getMonth(),\n            startDateValue.getDate(),\n            startTimeValue.getHours(),\n            startTimeValue.getMinutes(),\n            startTimeValue.getSeconds()\n        );\n        schedulerEvent.schedule.startTime = startTime.getTime();\n        if (formValues.repeat) {\n            schedulerEvent.schedule.repeat = {\n                type: formValues.repeatType,\n                endsOn: formValues.endsOnDate.getTime()\n            };\n            if (formValues.repeatType === 'WEEKLY') {\n                schedulerEvent.schedule.repeat.repeatOn = [];\n                for (let i = 0; i < 7; i++) {\n                    if (formValues.weeklyRepeat[i]) {\n                        schedulerEvent.schedule.repeat.repeatOn.push(i);\n                    }\n                }\n            } else if (formValues.repeatType === 'TIMER') {\n                schedulerEvent.schedule.repeat.repeatInterval = formValues.timerRepeat.repeatInterval;\n                schedulerEvent.schedule.repeat.timeUnit = formValues.timerRepeat.timeUnit;\n            } else if (formValues.repeatType === 'EVERY_N_DAYS') {\n                schedulerEvent.schedule.repeat.days = formValues.days;\n            } else if (formValues.repeatType === 'EVERY_N_WEEKS') {\n                schedulerEvent.schedule.repeat.weeks = formValues.weeks;\n            }\n        }\n        const condition = formValues.condition;\n        if (condition === 'consumption') {\n            schedulerEvent.configuration.msgBody.volumeInLitters = formValues.volumeInLitters;\n        } else {\n            schedulerEvent.configuration.msgBody.durationInMinutes = formValues.durationInMinutes;\n        }\n        return schedulerEventService.saveSchedulerEvent(schedulerEvent);\n    }\n\n}\n",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "0055529f-4ce0-f8c3-12b6-c466af22b063"
              }
            ],
            "actionCellButton": [
              {
                "name": "Edit irrigation schedule",
                "icon": "edit",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "<form #addSchedulerEventForm=\"ngForm\" [formGroup]=\"editSchedulerEventFormGroup\"\n      (ngSubmit)=\"save()\" class=\"sf-scheduler-event-form\">\n    <mat-toolbar fxLayout=\"row\" color=\"primary\">\n        <h2>Edit irrigation schedule '{{ entityName }}'</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\n    </mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Name</mat-label>\n                <input matInput formControlName=\"name\" required>\n                <mat-error *ngIf=\"editSchedulerEventFormGroup.get('name').hasError('required')\">\n                    Name is required.\n                </mat-error>\n            </mat-form-field>\n        </div>\n        <span class=\"title-modal\">Start</span>\n        <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\n            <mat-form-field appearance=\"fill\">\n                <mat-label>Date</mat-label>\n                <mat-datetimepicker-toggle [for]=\"startDatePicker\" matSuffix></mat-datetimepicker-toggle>\n                <mat-datetimepicker (opened)=\"datePickerOpened()\" #startDatePicker type=\"date\" openOnFocus=\"true\"></mat-datetimepicker>\n                <input required matInput formControlName=\"startDate\" [matDatetimepicker]=\"startDatePicker\">\n            </mat-form-field>\n            <mat-form-field appearance=\"fill\">\n                <mat-label>Time</mat-label>\n                <mat-datetimepicker-toggle [for]=\"startTimePicker\" matSuffix></mat-datetimepicker-toggle>\n                <mat-datetimepicker (opened)=\"datePickerOpened()\" #startTimePicker type=\"time\" openOnFocus=\"true\"></mat-datetimepicker>\n                <input required matInput formControlName=\"startTime\" [matDatetimepicker]=\"startTimePicker\">\n            </mat-form-field>\n        </div>\n        <span class=\"title-modal\">Stop irrigation condition</span>\n        <mat-button-toggle-group formControlName=\"condition\" aria-label=\"Condition\">\n            <mat-button-toggle fxFlex value=\"consumption\">Consumption</mat-button-toggle>\n            <mat-button-toggle fxFlex value=\"duration\">Duration</mat-button-toggle>\n        </mat-button-toggle-group>\n        <section *ngIf=\"editSchedulerEventFormGroup.get('condition').value === 'consumption'\" fxLayout=\"column\">\n            <label class=\"tb-small\" style=\"padding-top: 12px; padding-bottom: 12px;\">Stop irrigation when the amount of water used reaches specified value</label>\n            <mat-form-field appearance=\"fill\">\n                <mat-label>Liters</mat-label>\n                <input required matInput formControlName=\"volumeInLitters\" type=\"number\" min=\"1\" step=\"1\">\n                <mat-error *ngIf=\"editSchedulerEventFormGroup.get('volumeInLitters').hasError('required')\">\n                      Volume in litters is required.\n                </mat-error>\n                <mat-error *ngIf=\"editSchedulerEventFormGroup.get('volumeInLitters').hasError('min')\">\n                      Volume in litters must be greater than 0.\n                </mat-error>\n            </mat-form-field>\n        </section>\n        <section *ngIf=\"editSchedulerEventFormGroup.get('condition').value === 'duration'\" fxLayout=\"column\">\n            <label class=\"tb-small\" style=\"padding-top: 12px; padding-bottom: 12px;\">Stop irrigation after the specified time</label>\n            <mat-form-field appearance=\"fill\">\n                <mat-label>Duration, min</mat-label>\n                <input required matInput formControlName=\"durationInMinutes\" type=\"number\" min=\"1\" step=\"1\">\n                <mat-error *ngIf=\"editSchedulerEventFormGroup.get('durationInMinutes').hasError('required')\">\n                      Duration is required.\n                </mat-error>\n                <mat-error *ngIf=\"editSchedulerEventFormGroup.get('durationInMinutes').hasError('min')\">\n                      Duration must be greater than 0.\n                </mat-error>\n            </mat-form-field>\n        </section>\n        <mat-slide-toggle formControlName=\"repeat\" style=\"padding-bottom: 48px;\">\n            Repeat\n        </mat-slide-toggle>\n        <section *ngIf=\"editSchedulerEventFormGroup.get('repeat').value\" fxLayout=\"column\">\n            <mat-form-field appearance=\"fill\">\n              <mat-label translate>scheduler.repeats</mat-label>\n              <mat-select matInput formControlName=\"repeatType\" required>\n                <mat-option *ngFor=\"let repeatType of schedulerRepeatTypeValues\" [value]=\"repeatType\">\n                  {{ schedulerRepeatTypes[repeatType] | translate }}\n                </mat-option>\n              </mat-select>\n            </mat-form-field>\n            <mat-form-field appearance=\"fill\" *ngIf=\"editSchedulerEventFormGroup.get('repeatType').value === 'EVERY_N_DAYS'\" style=\"padding-bottom: 16px;\">\n              <mat-label translate>scheduler.repeat-every-n-days</mat-label>\n              <input type=\"number\" min=\"1\" step=\"1\" matInput formControlName=\"days\" required>\n              <mat-error *ngIf=\"editSchedulerEventFormGroup.get('days').hasError('required')\">\n                {{ 'scheduler.repeat-days-required' | translate }}\n              </mat-error>\n              <mat-error *ngIf=\"editSchedulerEventFormGroup.get('days').hasError('min')\">\n                {{ 'scheduler.invalid-repeat-days-value' | translate }}\n              </mat-error>\n            </mat-form-field>\n            <mat-form-field appearance=\"fill\" *ngIf=\"editSchedulerEventFormGroup.get('repeatType').value === 'EVERY_N_WEEKS'\" style=\"padding-bottom: 16px;\">\n              <mat-label translate>scheduler.repeat-every-n-weeks</mat-label>\n              <input type=\"number\" min=\"1\" step=\"1\" matInput formControlName=\"weeks\" required>\n              <mat-error *ngIf=\"editSchedulerEventFormGroup.get('weeks').hasError('required')\">\n                {{ 'scheduler.repeat-weeks-required' | translate }}\n              </mat-error>\n              <mat-error *ngIf=\"editSchedulerEventFormGroup.get('days').hasError('min')\">\n                {{ 'scheduler.invalid-repeat-weeks-value' | translate }}\n              </mat-error>\n            </mat-form-field>\n            <section *ngIf=\"editSchedulerEventFormGroup.get('repeatType').value === 'TIMER'\"\n                 formGroupName=\"timerRepeat\"\n                 fxLayout=\"column\">\n              <label translate class=\"tb-small\" style=\"padding-bottom: 8px;\">scheduler.repeat-every</label>\n              <div fxLayout=\"column\" fxLayout.gt-sm=\"row\" fxLayoutGap=\"8px\">\n                <mat-form-field appearance=\"fill\" fxFlex=\"50\">\n                  <mat-label>Interval</mat-label>\n                  <input type=\"number\" min=\"0\" stype=\"any\" matInput formControlName=\"repeatInterval\" required>\n                  <mat-error *ngIf=\"editSchedulerEventFormGroup.get('timerRepeat.repeatInterval').hasError('required')\">\n                    {{ 'scheduler.time-interval-required' | translate }}\n                  </mat-error>\n                </mat-form-field>\n                <mat-form-field appearance=\"fill\" fxFlex=\"50\">\n                  <mat-label>Time unit</mat-label>\n                  <mat-select matInput formControlName=\"timeUnit\" required>\n                    <mat-option *ngFor=\"let timeUnit of schedulerTimeUnitValues\" [value]=\"timeUnit\">\n                      {{ schedulerTimeUnits[timeUnit] | translate }}\n                    </mat-option>\n                  </mat-select>\n                  <mat-error *ngIf=\"editSchedulerEventFormGroup.get('timerRepeat.timeUnit').hasError('required')\">\n                    {{ 'scheduler.time-unit-required' | translate }}\n                  </mat-error>\n                </mat-form-field>\n              </div>\n            </section>\n            <section *ngIf=\"editSchedulerEventFormGroup.get('repeatType').value === 'WEEKLY'\"\n                            formArrayName=\"weeklyRepeat\"\n                            fxLayout=\"column\" style=\"padding-bottom: 16px;\">\n                <label translate class=\"tb-small\">scheduler.repeat-on</label>\n                <span style=\"height: 16px;\"></span>\n                <div fxLayout=\"row\" fxLayoutGap=\"16px\">\n                    <ng-container *ngFor=\"let key of weeklyRepeatsKeys\">\n                        <button type=\"button\"\n                                mat-button\n                                class=\"weekly-repeat\"\n                                [color]=\"weeklyRepeatControl(key).value ? 'primary' : ''\"\n                                [ngClass]=\"{ 'mat-stroked-button': !weeklyRepeatControl(key).value, 'mat-raised-button': weeklyRepeatControl(key).value, 'no-border': weeklyRepeatControl(key).value }\"\n                                (click)=\"toggleWeeklyRepeat(key)\"\n                                matTooltip=\"{{ weeklyRepeats[key].tooltip | translate }}\"\n                                matTooltipPosition=\"above\">\n                            {{ weeklyRepeats[key].label | translate }}\n                        </button>\n                    </ng-container>\n                </div>    \n            </section>    \n            <section fxLayout=\"row\" fxLayoutAlign=\"start start\">\n              <mat-form-field appearance=\"fill\">\n                <mat-label>End date</mat-label>\n                <mat-datetimepicker-toggle [for]=\"endDatePicker\" matSuffix></mat-datetimepicker-toggle>\n                <mat-datetimepicker (opened)=\"datePickerOpened()\" #endDatePicker type=\"date\" openOnFocus=\"true\"></mat-datetimepicker>\n                <input required matInput formControlName=\"endsOnDate\" [matDatetimepicker]=\"endDatePicker\" [errorStateMatcher]=\"endsOnDateMatcher\">\n                <mat-error *ngIf=\"editSchedulerEventFormGroup.hasError('endsOnDateValidator')\">\n                  Invalid date.\n                </mat-error>\n              </mat-form-field>\n            </section>\n        </section>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                [disabled]=\"(isLoading$ | async)\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button mat-raised-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || addSchedulerEventForm.invalid || !addSchedulerEventForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>\n",
                "customCss": ".sf-scheduler-event-form .mat-toolbar.mat-primary {\n    background: #fff;\n    color: rgba(0, 0, 0, 0.87);\n}\n\n.sf-scheduler-event-form .mat-button.mat-primary, .sf-scheduler-event-form .mat-icon-button.mat-primary, .sf-scheduler-event-form .mat-stroked-button.mat-primary {\n    color: #5553AF;\n}\n\n.sf-scheduler-event-form .mat-fab.mat-primary, .sf-scheduler-event-form .mat-flat-button.mat-primary, .sf-scheduler-event-form .mat-mini-fab.mat-primary, .sf-scheduler-event-form .mat-raised-button.mat-primary {\n    color: #fff;\n}\n\n.sf-scheduler-event-form .mat-fab.mat-primary, .sf-scheduler-event-form .mat-flat-button.mat-primary, .sf-scheduler-event-form .mat-mini-fab.mat-primary, .sf-scheduler-event-form .mat-raised-button.mat-primary {\n    background-color: #6F74F2;\n}\n\n.sf-scheduler-event-form .mat-button.mat-primary .mat-button-focus-overlay, .sf-scheduler-event-form .mat-icon-button.mat-primary .mat-button-focus-overlay, .sf-scheduler-event-form .mat-stroked-button.mat-primary .mat-button-focus-overlay {\n    background-color: #6F74F2;\n}\n\n.sf-scheduler-event-form .mat-form-field.mat-focused .mat-form-field-label {\n    color: #5553AF;\n}\n\n.sf-scheduler-event-form .mat-form-field.mat-focused .mat-form-field-ripple {\n    background-color: #6F74F2;\n}\n\n.sf-scheduler-event-form .mat-slide-toggle.mat-checked .mat-ripple-element, .sf-scheduler-event-form .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb {\n    background-color: #6F74F2;\n}\n\n.sf-scheduler-event-form .mat-slide-toggle.mat-checked .mat-slide-toggle-bar {\n    background-color: rgba(111, 116, 242, 0.54);\n}\n\n.sf-scheduler-event-form .mat-datetimepicker-calendar-header {\n    background-color: #6F74F2;\n}\n\n.sf-scheduler-event-form .mat-datetimepicker-calendar-body-cell-content.mat-datetimepicker-calendar-body-selected {\n    background-color: #6F74F2;\n}\n\n.sf-scheduler-event-form .mat-datetimepicker-clock-cell.mat-datetimepicker-clock-cell-selected {\n    background-color: #8689f4;\n}\n\n.sf-scheduler-event-form .mat-datetimepicker-clock-center, .sf-scheduler-event-form .mat-datetimepicker-clock-hand, .sf-scheduler-event-form .mat-datetimepicker-clock-hand:before {\n    background-color: #6F74F2;\n}\n\n.sf-scheduler-event-form .mat-datetimepicker-calendar-body-cell-content.mat-datetimepicker-calendar-body-today:not(.mat-datetimepicker-calendar-body-selected) {\n    border-color: #6F74F2;\n}\n\n.sf-scheduler-event-form .mat-icon {\n    color: #868D9C;\n}\n\n.sf-scheduler-event-form .title-modal {\n    font-weight: 500;\n    font-size: 16px;\n    line-height: 130%;\n    color: #868D9C;\n    padding-bottom: 8px;\n}\n\n.sf-scheduler-event-form .mat-button-toggle-group-appearance-standard, .sf-scheduler-event-form .mat-button-toggle-standalone.mat-button-toggle-appearance-standard {\n    border: none;\n}\n\n.sf-scheduler-event-form .mat-button-toggle {\n    background: rgba(0, 0, 0, 0.06);\n    height: 32px;\n    align-items: center;\n    display: flex;\n}\n\n.sf-scheduler-event-form .mat-button-toggle-checked .mat-button-toggle-button {\n    background-color: #fff;\n    border-radius: 4px;\n    margin-left: 2px;\n    margin-right: 2px;\n}\n\n.sf-scheduler-event-form .mat-button-toggle-appearance-standard .mat-button-toggle-label-content {\n    line-height: 28px;\n    font-size: 14px;\n}\n\n.sf-scheduler-event-form .mat-button-toggle-group-appearance-standard .mat-button-toggle+.mat-button-toggle {\n    border-left: none;\n}\n\n.sf-scheduler-event-form .mat-button-toggle-checked.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay {\n    opacity: .01;\n}\n\n.sf-scheduler-event-form .mat-button.weekly-repeat {\n    padding: 0 15px;\n    min-width: 0;\n}\n\n.sf-scheduler-event-form .mat-button.weekly-repeat.no-border {\n    padding: 0 16px;\n}\n",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\nlet schedulerEventService = $injector.get(widgetContext.servicesMap.get('schedulerEventService'));\n\nopenEditSchedulerEventDialog();\n\nfunction openEditSchedulerEventDialog() {\n    customDialog.customDialog(htmlTemplate, EditSchedulerEventDialogController).subscribe();\n}\n\n\nfunction EditSchedulerEventDialogController(instance) {\n    let vm = instance;\n    \n    vm.entityName = entityName;\n    \n    vm.schedulerEvent = null;\n\n    var currentDate = new Date();\n    var startDate = new Date(\n      currentDate.getFullYear(),\n      currentDate.getMonth(),\n      currentDate.getDate());\n    var startTime = new Date(\n      currentDate.getFullYear(),\n      currentDate.getMonth(),\n      currentDate.getDate(),\n      0,0,0,0);\n\n    vm.schedulerRepeatTypes = {\n        'DAILY': 'scheduler.daily',\n        'EVERY_N_DAYS': 'scheduler.every-n-days',\n        'WEEKLY': 'scheduler.weekly',\n        'EVERY_N_WEEKS': 'scheduler.every-n-weeks',\n        'MONTHLY': 'scheduler.monthly',\n        'YEARLY': 'scheduler.yearly',\n        'TIMER': 'scheduler.timer'\n    };\n\n      \n    vm.schedulerRepeatTypeValues = Object.keys(vm.schedulerRepeatTypes);\n    \n    vm.schedulerTimeUnits = {\n        'HOURS': 'scheduler.hours',\n        'MINUTES': 'scheduler.minutes',\n        'SECONDS': 'scheduler.seconds'\n    };\n\n      \n    vm.schedulerTimeUnitValues = Object.keys(vm.schedulerTimeUnits);\n    \n    vm.weeklyRepeats = {\n      0: { label: 'scheduler.sunday-label', tooltip: 'scheduler.repeat-on-sunday' },  \n      1: { label: 'scheduler.monday-label', tooltip: 'scheduler.repeat-on-monday' },\n      2: { label: 'scheduler.tuesday-label', tooltip: 'scheduler.repeat-on-tuesday' },\n      3: { label: 'scheduler.wednesday-label', tooltip: 'scheduler.repeat-on-wednesday' },\n      4: { label: 'scheduler.thursday-label', tooltip: 'scheduler.repeat-on-thursday' },\n      5: { label: 'scheduler.friday-label', tooltip: 'scheduler.repeat-on-friday' },\n      6: { label: 'scheduler.saturday-label', tooltip: 'scheduler.repeat-on-saturday' },\n    };\n    \n    vm.weeklyRepeatsKeys = Object.keys(vm.weeklyRepeats);\n    \n    vm.weeklyRepeatControl  = function(index) {\n        return vm.editSchedulerEventFormGroup.get('weeklyRepeat').at(index);\n    }\n    \n    vm.toggleWeeklyRepeat = function(key) {\n        const control = vm.weeklyRepeatControl(key);\n        control.setValue(!control.value);\n        vm.editSchedulerEventFormGroup.get('weeklyRepeat').markAsDirty();\n    }\n    \n    vm.createDefaultWeeklyRepeat = function(startDate, weeklyRepeat) {\n        if (!weeklyRepeat) {\n          weeklyRepeat = [];\n          for (let i = 0; i < 7; i++) {\n            weeklyRepeat[i] = false;\n          }\n        }\n        if (typeof startDate !== 'undefined' && startDate !== null) {\n          const setCurrentDate = weeklyRepeat.filter(repeat => repeat).length === 0;\n          if (setCurrentDate) {\n            const day = moment(startDate).day();\n            weeklyRepeat[day] = true;\n          }\n        }\n        return weeklyRepeat;\n    }\n    \n    vm.endsOnDateValidator = function(startDate, endsOnDate) {\n        return (group) => {\n          if (group.controls[endsOnDate].status === 'VALID') {\n            if (group.controls[startDate].value.getTime() > group.controls[endsOnDate].value.getTime()) {\n              return { endsOnDateValidator: true };\n            }\n          }\n          return null;\n        };\n    };\n    \n    vm.endsOnDateMatcher = {\n        isErrorState: function(control) {\n            const invalidCtrl = control && !!(control.invalid);\n            const invalidParent = control && !!(control.parent &&\n            control.parent.invalid && control.parent.hasError('endsOnDateValidator'));\n            return (invalidCtrl || invalidParent);\n        }\n    };\n    \n    vm.datePickerOpened = function() {\n      $('.mat-datetimepicker-popup').addClass('sf-scheduler-event-form');\n    };\n\n\n    vm.editSchedulerEventFormGroup = vm.fb.group({\n      name: ['', [vm.validators.required]],\n      startDate: [startDate, [vm.validators.required]],\n      startTime: [startTime, [vm.validators.required]],\n      condition: ['consumption', []],\n      volumeInLitters: [1000, [vm.validators.required, vm.validators.min(1)]],\n      durationInMinutes: [30, [vm.validators.required, vm.validators.min(1)]],\n      repeat: [null, []],\n      repeatType: [null, [vm.validators.required]],\n      weeklyRepeat: vm.fb.array(vm.createDefaultWeeklyRepeat()),\n      endsOnDate: [null, [vm.validators.required]],\n      days: [null, [vm.validators.min(1), vm.validators.required]],\n      weeks: [null, [vm.validators.min(1), vm.validators.required]],\n      timerRepeat: vm.fb.group(\n        {\n          repeatInterval: [null, [vm.validators.required, vm.validators.min(0)]],\n          timeUnit: [null, [vm.validators.required]]\n        }\n      )\n    },\n    {\n        validator: vm.endsOnDateValidator('startDate', 'endsOnDate')\n    });\n    \n    vm.editSchedulerEventFormGroup.get('repeat').valueChanges.subscribe((repeat) => {\n      if (repeat) {\n        vm.editSchedulerEventFormGroup.get('repeatType').patchValue('DAILY', {emitEvent: false});\n        const startDate = vm.editSchedulerEventFormGroup.get('startDate').value;\n        const endsOnDate = new Date(\n          startDate.getFullYear(),\n          startDate.getMonth(),\n          startDate.getDate() + 5);\n        vm.editSchedulerEventFormGroup.get('endsOnDate').patchValue(endsOnDate, {emitEvent: false});\n      }\n      vm.updateEnabledState();\n    });\n    \n    vm.editSchedulerEventFormGroup.get('repeatType').valueChanges.subscribe((repeatType) => {\n      if (repeatType === 'WEEKLY') {\n          const startDate = vm.editSchedulerEventFormGroup.get('startDate').value;\n          vm.editSchedulerEventFormGroup.get('weeklyRepeat').patchValue(vm.createDefaultWeeklyRepeat(startDate), {emitEvent: false});\n      }\n      vm.updateEnabledState();\n    });\n    \n    vm.editSchedulerEventFormGroup.get('weeklyRepeat').valueChanges.subscribe((weeklyRepeat) => {\n      const startDate = vm.editSchedulerEventFormGroup.get('startDate').value;\n      vm.editSchedulerEventFormGroup.get('weeklyRepeat').patchValue(vm.createDefaultWeeklyRepeat(startDate, weeklyRepeat),\n        {emitEvent: false});\n    });\n    \n    vm.editSchedulerEventFormGroup.get('condition').valueChanges.subscribe(() => {\n      vm.updateEnabledState();\n    });\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n    \n    vm.updateEnabledState = function() {\n        vm.editSchedulerEventFormGroup.enable({emitEvent: false});\n        const repeat = vm.editSchedulerEventFormGroup.get('repeat').value;\n        const condition = vm.editSchedulerEventFormGroup.get('condition').value;\n        if (!repeat) {\n            vm.editSchedulerEventFormGroup.get('repeatType').disable({emitEvent: false});\n            vm.editSchedulerEventFormGroup.get('weeklyRepeat').disable({emitEvent: false});\n            vm.editSchedulerEventFormGroup.get('endsOnDate').disable({emitEvent: false});\n            vm.editSchedulerEventFormGroup.get('timerRepeat').disable({emitEvent: false});\n            vm.editSchedulerEventFormGroup.get('days').disable({emitEvent: false});\n            vm.editSchedulerEventFormGroup.get('weeks').disable({emitEvent: false});\n        } else {\n            const repeatType = vm.editSchedulerEventFormGroup.get('repeatType').value;\n            if (repeatType !== 'WEEKLY') {\n                vm.editSchedulerEventFormGroup.get('weeklyRepeat').disable({emitEvent: false});\n            }\n            if (repeatType !== 'TIMER') {\n                vm.editSchedulerEventFormGroup.get('timerRepeat').disable({emitEvent: false});\n            }\n            if (repeatType !== 'EVERY_N_DAYS') {\n                vm.editSchedulerEventFormGroup.get('days').disable({emitEvent: false});\n            }\n            if (repeatType !== 'EVERY_N_WEEKS') {\n                vm.editSchedulerEventFormGroup.get('weeks').disable({emitEvent: false});\n            }\n        }\n        if (condition === 'consumption') {\n            vm.editSchedulerEventFormGroup.get('durationInMinutes').disable({emitEvent: false});\n        } else {\n            vm.editSchedulerEventFormGroup.get('volumeInLitters').disable({emitEvent: false});\n        }\n        \n        vm.editSchedulerEventFormGroup.get('repeatType').updateValueAndValidity({emitEvent: false});\n        vm.editSchedulerEventFormGroup.get('weeklyRepeat').updateValueAndValidity({emitEvent: false});\n        vm.editSchedulerEventFormGroup.get('endsOnDate').updateValueAndValidity({emitEvent: false});\n        vm.editSchedulerEventFormGroup.get('timerRepeat').updateValueAndValidity({emitEvent: false});\n        vm.editSchedulerEventFormGroup.get('days').updateValueAndValidity({emitEvent: false});\n        vm.editSchedulerEventFormGroup.get('weeks').updateValueAndValidity({emitEvent: false});\n        vm.editSchedulerEventFormGroup.get('durationInMinutes').updateValueAndValidity({emitEvent: false});\n        vm.editSchedulerEventFormGroup.get('volumeInLitters').updateValueAndValidity({emitEvent: false});\n    };\n    \n    vm.save = function() {\n        vm.editSchedulerEventFormGroup.markAsPristine();\n        saveSchedulerEventObservable().subscribe(\n            function () {\n                widgetContext.updateAliases();\n                vm.dialogRef.close(null);\n            }\n        );\n    };\n    \n    loadSchedulerEvent();\n\n    function saveSchedulerEventObservable() {\n        const formValues = vm.editSchedulerEventFormGroup.value;\n        vm.schedulerEvent.name = formValues.name;\n        vm.schedulerEvent.schedule = { timezone: moment.tz.guess() };\n        const startDateValue = formValues.startDate;\n        const startTimeValue = formValues.startTime;\n        const startTime = new Date(\n            startDateValue.getFullYear(),\n            startDateValue.getMonth(),\n            startDateValue.getDate(),\n            startTimeValue.getHours(),\n            startTimeValue.getMinutes(),\n            startTimeValue.getSeconds()\n        );\n        vm.schedulerEvent.schedule.startTime = startTime.getTime();\n        if (formValues.repeat) {\n            vm.schedulerEvent.schedule.repeat = {\n                type: formValues.repeatType,\n                endsOn: formValues.endsOnDate.getTime()\n            };\n            if (formValues.repeatType === 'WEEKLY') {\n                vm.schedulerEvent.schedule.repeat.repeatOn = [];\n                for (let i = 0; i < 7; i++) {\n                    if (formValues.weeklyRepeat[i]) {\n                        vm.schedulerEvent.schedule.repeat.repeatOn.push(i);\n                    }\n                }\n            } else if (formValues.repeatType === 'TIMER') {\n                vm.schedulerEvent.schedule.repeat.repeatInterval = formValues.timerRepeat.repeatInterval;\n                vm.schedulerEvent.schedule.repeat.timeUnit = formValues.timerRepeat.timeUnit;\n            } else if (formValues.repeatType === 'EVERY_N_DAYS') {\n                vm.schedulerEvent.schedule.repeat.days = formValues.days;\n            } else if (formValues.repeatType === 'EVERY_N_WEEKS') {\n                vm.schedulerEvent.schedule.repeat.weeks = formValues.weeks;\n            }\n        } else {\n            delete vm.schedulerEvent.repeat;\n        }\n        const condition = formValues.condition;\n        vm.schedulerEvent.configuration.msgBody = {};\n        if (condition === 'consumption') {\n            vm.schedulerEvent.configuration.msgBody.volumeInLitters = formValues.volumeInLitters;\n        } else {\n            vm.schedulerEvent.configuration.msgBody.durationInMinutes = formValues.durationInMinutes;\n        }\n        return schedulerEventService.saveSchedulerEvent(vm.schedulerEvent);\n    }\n    \n    function loadSchedulerEvent() {\n        schedulerEventService.getSchedulerEvent(entityId.id).subscribe(\n            function (schedulerEvent) {\n                vm.schedulerEvent = schedulerEvent;\n                vm.editSchedulerEventFormGroup.get('name').patchValue(vm.schedulerEvent.name, {emitEvent: false});\n                \n                var startDateValue = new Date(vm.schedulerEvent.schedule.startTime);\n                var startDate = new Date(\n                  startDateValue.getFullYear(),\n                  startDateValue.getMonth(),\n                  startDateValue.getDate());\n                var startTime = new Date(\n                  startDateValue.getFullYear(),\n                  startDateValue.getMonth(),\n                  startDateValue.getDate(),\n                  startDateValue.getHours(),\n                  startDateValue.getMinutes(),\n                  startDateValue.getSeconds()\n                  ,0);\n                vm.editSchedulerEventFormGroup.get('startDate').patchValue(startDate, {emitEvent: false});\n                vm.editSchedulerEventFormGroup.get('startTime').patchValue(startTime, {emitEvent: false});\n                if (typeof vm.schedulerEvent.configuration.msgBody.volumeInLitters !== 'undefined' && \n                    vm.schedulerEvent.configuration.msgBody.volumeInLitters !== null) {\n                    vm.editSchedulerEventFormGroup.get('condition').patchValue('consumption', {emitEvent: false});\n                    vm.editSchedulerEventFormGroup.get('volumeInLitters').patchValue(vm.schedulerEvent.configuration.msgBody.volumeInLitters, {emitEvent: false});\n                } else {\n                    vm.editSchedulerEventFormGroup.get('condition').patchValue('duration', {emitEvent: false});\n                    vm.editSchedulerEventFormGroup.get('durationInMinutes').patchValue(vm.schedulerEvent.configuration.msgBody.durationInMinutes, {emitEvent: false});\n                }\n                if (vm.schedulerEvent.schedule.repeat) {\n                    vm.editSchedulerEventFormGroup.get('repeat').patchValue(true, {emitEvent: false});\n                    vm.editSchedulerEventFormGroup.get('repeatType').patchValue(vm.schedulerEvent.schedule.repeat.type, {emitEvent: false});\n                    if (vm.schedulerEvent.schedule.repeat.type === 'WEEKLY' && vm.schedulerEvent.schedule.repeat.repeatOn) {\n                        const weeklyRepeat = vm.createDefaultWeeklyRepeat();\n                        vm.schedulerEvent.schedule.repeat.repeatOn.forEach((repeatOn) => {\n                            weeklyRepeat[repeatOn] = true;\n                        });\n                        vm.editSchedulerEventFormGroup.get('weeklyRepeat').patchValue(weeklyRepeat, {emitEvent: false});\n                    } else if (vm.schedulerEvent.schedule.repeat.type === 'TIMER') {\n                        vm.editSchedulerEventFormGroup.get('timerRepeat').patchValue({\n                            repeatInterval: vm.schedulerEvent.schedule.repeat.repeatInterval,\n                            timeUnit: vm.schedulerEvent.schedule.repeat.timeUnit\n                        }, {emitEvent: false});\n                    } else if (vm.schedulerEvent.schedule.repeat.type === 'EVERY_N_DAYS') {\n                        vm.editSchedulerEventFormGroup.get('days').patchValue(vm.schedulerEvent.schedule.repeat.days, {emitEvent: false});\n                    } else if (vm.schedulerEvent.schedule.repeat.type === 'EVERY_N_WEEKS') {\n                        vm.editSchedulerEventFormGroup.get('weeks').patchValue(vm.schedulerEvent.schedule.repeat.weeks, {emitEvent: false});\n                    }\n                    vm.editSchedulerEventFormGroup.get('endsOnDate').patchValue(new Date(vm.schedulerEvent.schedule.repeat.endsOn), {emitEvent: false});\n                } else {\n                    vm.editSchedulerEventFormGroup.get('repeat').patchValue(false, {emitEvent: false});\n                }\n                \n                vm.updateEnabledState();\n            }\n        );\n    }\n\n}\n",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "2b9ed19c-fc5c-f3fa-c5e2-561e0ac941f4"
              },
              {
                "name": "Delete irrigation schedule",
                "icon": "delete",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "",
                "customCss": ".sf-scheduler-delete-dialog .mat-button.mat-primary, .sf-scheduler-delete-dialog .mat-icon-button.mat-primary, .sf-scheduler-delete-dialog .mat-stroked-button.mat-primary {\n    color: #5553AF;\n}\n\n.sf-scheduler-delete-dialog .mat-fab.mat-primary, .sf-scheduler-delete-dialog .mat-flat-button.mat-primary, .sf-scheduler-delete-dialog .mat-mini-fab.mat-primary, .sf-scheduler-delete-dialog .mat-raised-button.mat-primary {\n    color: #fff;\n}\n\n.sf-scheduler-delete-dialog .mat-fab.mat-primary, .sf-scheduler-delete-dialog .mat-flat-button.mat-primary, .sf-scheduler-delete-dialog .mat-mini-fab.mat-primary, .sf-scheduler-delete-dialog .mat-raised-button.mat-primary {\n    background-color: #6F74F2;\n}\n\n.sf-scheduler-delete-dialog .mat-button.mat-primary .mat-button-focus-overlay, .sf-scheduler-delete-dialog .mat-icon-button.mat-primary .mat-button-focus-overlay, .sf-scheduler-delete-dialog .mat-stroked-button.mat-primary .mat-button-focus-overlay {\n    background-color: #6F74F2;\n}\n",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\n\nlet schedulerEventService = $injector.get(widgetContext.servicesMap.get('schedulerEventService'));\n\nopenDeleteEntityDialog();\n\nfunction openDeleteEntityDialog() {\n    let title = 'Delete irrigation schedule \\'' +\n                 entityName + '\\'';\n    let content = 'Are you sure you want to delete the irrigation schedule \\'' + entityName + '\\'?';\n    dialogs.confirm(title, content, 'Cancel', 'Delete').subscribe(\n        function(result) {\n            if (result) {\n                deleteEntity();\n            }\n        }\n    );\n    $('tb-confirm-dialog').addClass('sf-scheduler-delete-dialog');\n}\n\nfunction deleteEntity() {\n    deleteEntityObservable(entityId).subscribe(\n        function success() {\n            widgetContext.updateAliases();\n        },\n        function fail() {\n            showErrorDialog();\n        }\n    );\n}\n\nfunction deleteEntityObservable(entityId) {\n    return schedulerEventService.deleteSchedulerEvent(entityId.id);\n}\n\nfunction showErrorDialog() {\n    let title = 'Error';\n    let content = 'An error occurred while deleting the irrigation schedule. Please try again.';\n    dialogs.alert(title, content, 'CLOSE').subscribe(\n        function(result) {}\n    );\n}\n",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "d25bf90c-9b6f-d98f-a4f0-420772761047"
              }
            ]
          }
        },
        "row": 0,
        "col": 0,
        "id": "a6b597ee-cb21-ee9f-dc98-8673f1d976f1"
      },
      "8ce15aad-9ab2-55ce-2628-a663814d27b1": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 6.5,
        "config": {
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1664866728397,
                "endTimeMs": 1664953128397
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "entitiesTitle": "Fields",
            "enableSearch": true,
            "enableSelectColumnDisplay": true,
            "enableStickyHeader": true,
            "enableStickyAction": true,
            "reserveSpaceForHiddenAction": "true",
            "displayEntityName": true,
            "entityNameColumnTitle": "Name",
            "displayEntityLabel": false,
            "displayEntityType": false,
            "displayPagination": true,
            "defaultPageSize": 10,
            "defaultSortOrder": "entityName",
            "useRowStyleFunction": false
          },
          "title": "New Entities table",
          "dropShadow": false,
          "enableFullscreen": true,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400,
            "padding": "5px 10px 5px 10px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "cd737d26-3068-aae0-d370-c93f8e7e1a00",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "label",
                  "type": "entityField",
                  "label": "Label",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.7427597097428846
                }
              ]
            }
          ],
          "displayTimewindow": true,
          "actions": {
            "rowClick": [
              {
                "name": "Field details",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "field",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "9fac49b3-0e6b-9beb-56a7-6da9cec34984"
              }
            ]
          },
          "showTitleIcon": false,
          "titleTooltip": "",
          "enableDataExport": true,
          "widgetStyle": {},
          "widgetCss": "",
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "row": 0,
        "col": 0,
        "id": "8ce15aad-9ab2-55ce-2628-a663814d27b1"
      },
      "8fcd3aed-58d0-0cad-cf63-3a08e1be40a9": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 6.5,
        "config": {
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 86400000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1664866773831,
                "endTimeMs": 1664953173831
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "entitiesTitle": "Sensors",
            "enableSearch": true,
            "enableSelectColumnDisplay": true,
            "enableStickyHeader": true,
            "enableStickyAction": true,
            "reserveSpaceForHiddenAction": "true",
            "displayEntityName": false,
            "displayEntityLabel": false,
            "displayEntityType": false,
            "displayPagination": false,
            "defaultSortOrder": "name",
            "useRowStyleFunction": false
          },
          "title": "New Entities table",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400,
            "padding": "5px 10px 5px 10px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "aa55618a-278a-0776-832d-fa1fe5769a2a",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {
                    "columnWidth": "30%",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "columnExportOption": "onlyVisible"
                  },
                  "_hash": 0.964011137179303,
                  "aggregationType": null,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "moisture",
                  "type": "timeseries",
                  "label": "moisture",
                  "color": "#4caf50",
                  "settings": {
                    "columnWidth": "50%",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": true,
                    "cellContentFunction": "var percent = value + '%';\nvar percentText = value.toFixed(0) + '%';\nreturn '<div style=\"width: 100%; max-width: 100px; height: 16px; background: linear-gradient(to right, rgba(111, 116, 242, 0.16) '+percent+', rgba(111, 116, 242, 0.08) '+percent+'); border-radius: 5.21053px;\"><span style=\"padding-left: 4px; font-weight: 600; font-size: 13px; color: #5553AF;\">'+percentText+'</span></div>';",
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "columnExportOption": "onlyVisible"
                  },
                  "_hash": 0.9864372687388072,
                  "aggregationType": "NONE",
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "active",
                  "type": "attribute",
                  "label": "active",
                  "color": "#f44336",
                  "settings": {
                    "columnWidth": "20%",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": true,
                    "cellContentFunction": "var text = value ? 'On' : 'Off';\nvar color = value ? '#198038' : 'red';\nreturn '<div><span style=\"width: 4px; height: 4px; border-radius: 2px; background: '+color+'; display: inline-block; vertical-align: middle;\"></span><span style=\"padding-left: 8px;\">'+text+'</span></div>';",
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "columnExportOption": "onlyVisible"
                  },
                  "_hash": 0.49788361286301885,
                  "aggregationType": null,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "displayTimewindow": true,
          "showTitleIcon": false,
          "titleTooltip": "",
          "enableDataExport": true,
          "widgetStyle": {},
          "widgetCss": ".mat-header-row {\n    display: none;\n}\n\nmat-row, .mat-cell {\n    border-bottom: none;\n}",
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "row": 0,
        "col": 0,
        "id": "8fcd3aed-58d0-0cad-cf63-3a08e1be40a9"
      }
    },
    "states": {
      "default": {
        "name": "Irrigation Management",
        "root": true,
        "layouts": {
          "main": {
            "widgets": {
              "9096bb98-7d8a-5888-e77b-7f02c846c922": {
                "sizeX": 10,
                "sizeY": 6,
                "row": 6,
                "col": 0
              },
              "c5f8412d-2ffb-4c44-7a7f-223ceea08d84": {
                "sizeX": 12,
                "sizeY": 6,
                "row": 0,
                "col": 0
              },
              "8ce15aad-9ab2-55ce-2628-a663814d27b1": {
                "sizeX": 7,
                "sizeY": 6,
                "row": 0,
                "col": 12
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 24,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": true,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "field": {
        "name": "${entityName}",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "a6b597ee-cb21-ee9f-dc98-8673f1d976f1": {
                "sizeX": 13,
                "sizeY": 5,
                "row": 0,
                "col": 0
              },
              "8fcd3aed-58d0-0cad-cf63-3a08e1be40a9": {
                "sizeX": 11,
                "sizeY": 5,
                "row": 0,
                "col": 13
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 24,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": true,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      }
    },
    "entityAliases": {
      "cd737d26-3068-aae0-d370-c93f8e7e1a00": {
        "id": "cd737d26-3068-aae0-d370-c93f8e7e1a00",
        "alias": "Fields",
        "filter": {
          "type": "assetType",
          "resolveMultiple": true,
          "assetType": "SF_Field",
          "assetNameFilter": ""
        }
      },
      "39927380-423a-872a-0843-de34f99264ad": {
        "id": "39927380-423a-872a-0843-de34f99264ad",
        "alias": "Current field",
        "filter": {
          "type": "stateEntity",
          "resolveMultiple": false,
          "stateEntityParamName": null,
          "defaultStateEntity": null
        }
      },
      "4ed5e77d-3c18-a442-e616-14f73013a686": {
        "id": "4ed5e77d-3c18-a442-e616-14f73013a686",
        "alias": "Irrigation schedule",
        "filter": {
          "type": "schedulerEvent",
          "resolveMultiple": true,
          "originatorStateEntity": true,
          "stateEntityParamName": null,
          "defaultStateEntity": null,
          "originator": null,
          "eventType": "Irrigation"
        }
      },
      "aa55618a-278a-0776-832d-fa1fe5769a2a": {
        "id": "aa55618a-278a-0776-832d-fa1fe5769a2a",
        "alias": "Moisture Sensors",
        "filter": {
          "type": "deviceSearchQuery",
          "resolveMultiple": true,
          "rootStateEntity": true,
          "stateEntityParamName": null,
          "defaultStateEntity": null,
          "rootEntity": null,
          "direction": "FROM",
          "maxLevel": 1,
          "fetchLastLevelOnly": false,
          "relationType": null,
          "deviceTypes": [
            "Soil Moisture Sensor"
          ]
        }
      }
    },
    "filters": {},
    "timewindow": {
      "hideInterval": false,
      "hideLastInterval": false,
      "hideQuickInterval": false,
      "hideAggregation": false,
      "hideAggInterval": false,
      "hideTimezone": false,
      "selectedTab": 0,
      "realtime": {
        "realtimeType": 0,
        "timewindowMs": 604800000,
        "quickInterval": "CURRENT_DAY",
        "interval": 1800000
      },
      "aggregation": {
        "type": "AVG",
        "limit": 25000
      }
    },
    "settings": {
      "stateControllerId": "entity",
      "showTitle": false,
      "showDashboardsSelect": false,
      "showEntitiesSelect": false,
      "showDashboardTimewindow": false,
      "showDashboardExport": true,
      "toolbarAlwaysOpen": true,
      "titleColor": "rgba(0,0,0,0.870588)",
      "showDashboardLogo": false,
      "dashboardLogoUrl": null,
      "hideToolbar": false,
      "showFilters": false,
      "showUpdateDashboardImage": false,
      "dashboardCss": ".tb-widget-container > .tb-widget {\n    border-radius: 8px;\n    box-shadow: 0px 4px 10px rgba(23, 33, 90, 0.08);\n}\n\n.tb-dashboard-content {\n    background: linear-gradient(0deg, rgba(111, 116, 242, 0.04), rgba(111, 116, 242, 0.04)), #FFFFFF !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-table .mat-header-cell {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-table .mat-cell {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-table .mat-header-cell .mat-sort-header-arrow {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-input-element::placeholder {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-input-element::-moz-placeholder {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-input-element::-webkit-input-placeholder {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-input-element:-ms-input-placeholder {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-table .mat-cell .mat-checkbox-frame,.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-table .mat-header-cell .mat-checkbox-frame {\n    border-color : #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-table .mat-cell button.mat-icon-button mat-icon {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-paginator {\n    color: #868D9C !important;\n}\n\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-paginator button.mat-icon-button {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-paginator .mat-select-value {\n    color: #868D9C !important;\n}\n"
    }
  },
  "externalId": null,
  "name": "Irrigation Management"
}