{
  "type": "SCRIPT",
  "name": "PH Filter Segment Flowing",
  "entityId": {
    "id": "eea395b0-7c0a-11ef-baac-dd7fa92789f4",
    "entityType": "ASSET"
  },
  "debugSettings": {
    "failuresEnabled": true,
    "allEnabled": false,
    "allEnabledUntil": 1740999626562
  },
  "configurationVersion": 0,
  "configuration": {
    "type": "SCRIPT",
    "arguments": {
      "drainSegmentFlowing": {
        "refEntityKey": {
          "key": "drainSegmentFlowing",
          "type": "ATTRIBUTE",
          "scope": "SERVER_SCOPE"
        },
        "defaultValue": "false"
      },
      "filterSegmentFlowing": {
        "refEntityKey": {
          "key": "filterSegmentFlowing",
          "type": "ATTRIBUTE",
          "scope": "SERVER_SCOPE"
        },
        "defaultValue": "false"
      },
      "heatPumpOutgoingValveOpened": {
        "refEntityId": {
          "entityType": "DEVICE",
          "id": "eebaa020-7c0a-11ef-baac-dd7fa92789f4"
        },
        "refEntityKey": {
          "key": "opened",
          "type": "TS_LATEST"
        },
        "defaultValue": "0"
      },
      "heatSegmentFlowing": {
        "refEntityKey": {
          "key": "heatSegmentFlowing",
          "type": "ATTRIBUTE",
          "scope": "SERVER_SCOPE"
        },
        "defaultValue": "false"
      },
      "throughpassValveOpened": {
        "refEntityId": {
          "entityType": "DEVICE",
          "id": "eeb0dc20-7c0a-11ef-baac-dd7fa92789f4"
        },
        "refEntityKey": {
          "key": "opened",
          "type": "TS_LATEST"
        },
        "defaultValue": "0"
      }
    },
    "expression": "var phFilterSegmentFlowing = \n    (filterSegmentFlowing && !drainSegmentFlowing && throughpassValveOpened == 1) ||\n    (heatSegmentFlowing && heatPumpOutgoingValveOpened == 1);\n\nreturn {\n    \"phFilterSegmentFlowing\": phFilterSegmentFlowing\n};",
    "output": {
      "type": "ATTRIBUTES",
      "scope": "SERVER_SCOPE"
    }
  }
}
